<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="music coding life love">
    <meta name="keyword" content="前端,kingsoft,javascript,python">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        关于网络请求的学习笔记 - kidish的博客 | kidish&#39;s Blog
        
    </title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/aircloud.css">
    <link rel="stylesheet" href="/css/gitment.css">
    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> I MEET YOU,TREASURE YOU, LOVE YOU, EVEN, I MISS YOU ... </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar">
            <img src="/img/avatar.jpg">
        </div>
        <div class="name">
            <i>kidish</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li>
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
            <li>
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li>
                <a href="/archives">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li>
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>搜索</span>
                </a>
            </li>
            
        </ul>
    </div>
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input">
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>
        <div class="index-about-mobile">
            <i> I MEET YOU,TREASURE YOU, LOVE YOU, EVEN, I MISS YOU ... </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        关于网络请求的学习笔记
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2018-10-23 10:39:34</span></span>
        
        <span class="attr">标签：/
        
        <a class="tag" href="/tags/#kilimanjaro" title="kilimanjaro">kilimanjaro</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>

    </div>
    <div class="post-content ">
        <h3 id="xhr-Learning"><a href="#xhr-Learning" class="headerlink" title="xhr Learning"></a>xhr Learning</h3><p>kidish:  axios你用过没<br>me：这是啥？…… 不好意思暴露智商了<br>kidish：那你从原生开始写吧 …</p>
<p>关于这一部分知识，一直都只是看过好几次文档，但是没有动手写过，这一次刚好系统地过一遍。</p>
<h4 id="1、Ajax"><a href="#1、Ajax" class="headerlink" title="1、Ajax"></a>1、Ajax</h4><ul>
<li>asynchronous JavaScript an XML</li>
<li>原生Ajax大致写法及一些涉及到的知识，<a href="https://www.jianshu.com/p/2be2e4f1fc8e" target="_blank" rel="noopener">一篇写得挺好的简书</a><br>和另外一个挺好的<a href="https://segmentfault.com/a/1190000004100271" target="_blank" rel="noopener">学习参考</a></li>
<li><p>基本写法<br>  1、 创建请求</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">xhr.open(<span class="string">'GET'</span>, <span class="string">'send-ajax-data.php'</span>); <span class="comment">//POST</span></span><br><span class="line">xhr.send(<span class="literal">null</span>); <span class="comment">//POST要传参</span></span><br></pre></td></tr></table></figure>
<p>  关于XMLHttpRequest：<br>  !!! 大多浏览器都有XMLHttpRequest对象，但是IE5/IE6，需要判断是否支持，否则需要使用ActiveObject对象<br>  <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest" target="_blank" rel="noopener">XMLHttpRequest</a></p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="built_in">window</span>.XMLHttpRequest) &#123;</span><br><span class="line">	xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">	xhr = <span class="keyword">new</span> ActiveObject(<span class="string">"Miscrosoft.XMLHTTP"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>   2 、处理服务器响应</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">xhr.onreadystatechage = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="keyword">if</span>(xhr.readyState == <span class="number">4</span>)&#123;</span><br><span class="line">      <span class="keyword">if</span>(xhr.status == <span class="number">200</span>)&#123;</span><br><span class="line">           <span class="built_in">console</span>.log(xhr.responseText)</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">"ERROR:"</span> + xhr.status)</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  <strong><code>onreadystatechage</code><a href="http://www.w3school.com.cn/ajax/ajax_xmlhttprequest_onreadystatechange.asp" target="_blank" rel="noopener">w3school</a></strong><br>  每当 readyState 改变时，就会触发 onreadystatechange 事件<br>  <code>readyState</code></p>
<ul>
<li>0: 请求未初始化</li>
<li>1: 服务器连接已建立</li>
<li>2: 请求已接收</li>
<li>3: 请求处理中</li>
<li>4: 请求已完成，且响应已就绪</li>
</ul>
<ul>
<li>GET 和 POST的区别<blockquote>
<ul>
<li>与 POST 相比，GET 更简单也更快，并且在大部分情况下都能用；</li>
<li>GET存在缓存问题，使用GET方法一定要记得清除缓存，不然请求的数据不是最新的；</li>
<li>GET不安全，明文传输，POST更安全；</li>
<li>GET适用于小文件，POST没有数量限制；</li>
<li>GET使用send方法时不传参，POST必须传参；</li>
</ul>
</blockquote>
</li>
</ul>
</li>
<li><p>Ajax 请求头<code>content-type</code>，使用<code>setRequestHeader</code> 设置请求头</p>
</li>
<li><code>application/json</code>、<code>application/x-www-form-urlencoded</code> <code>text/plain</code>(默认)、<code>text/html</code><br><a href="https://blog.csdn.net/u012794845/article/details/76255973" target="_blank" rel="noopener">简单参考</a><ul>
<li>当使用的是POST方法时：<ul>
<li><code>content-type</code>为<code>application/x-www-form-urlencoded</code>(发送表单数据)的时候: 发送的参数会在<code>form data</code>中；</li>
<li>而为<code>application/json</code>、<code>text/plain</code>、<code>text/plain</code>会出现在<code>Request Payload</code>中</li>
</ul>
</li>
<li>当使用的是GEt方法时：<ul>
<li>参数出现在<code>Query String Parameters</code>中</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://developer.mozilla.org/en/DOM/XMLHttpRequestEventTarget" target="_blank" rel="noopener"> XMLHttpRequestEventTarget</a></li>
<li><p><strong>http-server</strong><br>  之前说得光看文档不写，多半是没有了解到这种的存在<br>  http-server ：简单的零配置命令行HTTP服务器, 基于 nodeJs<br>  安装：<code>npm install http-server -g</code><br>  使用：打开到工程目录运行<code>http-server</code></p>
<blockquote>
<p>-p 端口号 (默认 8080)<br>-a IP 地址 (默认 0.0.0.0)<br>-d 显示目录列表 (默认 ‘True’)<br>-i 显示 autoIndex (默认 ‘True’)<br>-e or –ext 如果没有提供默认的文件扩展名(默认 ‘html’)<br>-s or –silent 禁止日志信息输出<br>–cors 启用 CORS via the Access-Control-Allow-Origin header<br>-o 在开始服务后打开浏览器<br>-c 为 cache-control max-age header 设置Cache time(秒) , e.g. -c10 for 10 seconds (defaults to ‘3600’). 禁用 caching, 则使用 -c-1.<br>-U 或 –utc 使用UTC time 格式化log消息<br>-P or –proxy Proxies all requests which can’t be resolved locally to the given url. e.g.: -P <a href="http://someurl.com" target="_blank" rel="noopener">http://someurl.com</a><br>-S or –ssl 启用 https<br>-C or –cert ssl cert 文件路径 (default: cert.pem)<br>-K or –key Path to ssl key file (default: key.pem).<br>-r or –robots Provide a /robots.txt (whose content defaults to ‘User-agent: *\nDisallow: /‘)<br>-h or –help 打印以上列表并退出</p>
</blockquote>
</li>
<li><p><strong>http-server ./ -P XXXX</strong>代理</p>
</li>
<li><p>例如，打开工程目录，运行</p>
<blockquote>
<p>$ http-server ./ -P <a href="https://blog.csdn.net" target="_blank" rel="noopener">https://blog.csdn.net</a><br>  Starting up http-server, serving ./<br>  Available on:</p>
<pre><code>http://192.168.1.105:8080
http://127.0.0.1:8080
</code></pre><p>  Unhandled requests will be served from: <a href="https://blog.csdn.net" target="_blank" rel="noopener">https://blog.csdn.net</a><br>  Hit CTRL-C to stop the server<br>  http-server stopped.</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">var</span>  xhr = <span class="keyword">new</span>  XMLHttpRequest</span><br><span class="line"> xhr.open(<span class="string">'GET'</span>,<span class="string">'/api/articles?type=more&amp;category=home&amp;shown_offset=1540351013034122&amp;first_view=false'</span>)</span><br><span class="line"> xhr.send()</span><br><span class="line"> xhr.onreadystatechage = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(xhr.readyState == <span class="number">4</span>)&#123;</span><br><span class="line">  <span class="keyword">if</span>(xhr.status == <span class="number">200</span>)&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(xhr.responseText)</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">"ERROR:"</span> + xhr.status)</span><br><span class="line">&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>于是通过代理就可以成功进行请求了，就可以开始了我的动手旅程，应该是我最新的收获了，终于可以不再只看不写了~</p>
<ul>
<li>POST的尝试：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//https://www.zhihu.com/api/v4/articles/45395824/voters</span></span><br><span class="line"><span class="keyword">var</span>  xhr = <span class="keyword">new</span>  XMLHttpRequest</span><br><span class="line">xhr.open(<span class="string">'POST'</span>,<span class="string">'/lastread/touch'</span>)</span><br><span class="line">xhr.setRequestHeader(<span class="string">"Content-type"</span>, <span class="string">"application/json"</span>)</span><br><span class="line"><span class="keyword">var</span>  obj = &#123;<span class="attr">voiting</span>:<span class="number">1</span>&#125;</span><br><span class="line">obj = <span class="built_in">JSON</span>.stringify(obj)</span><br><span class="line">xhr.send(obj)</span><br><span class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(xhr.readyState == <span class="number">4</span>)&#123;</span><br><span class="line">	<span class="keyword">if</span>(xhr.status == <span class="number">200</span>)&#123;</span><br><span class="line">	   <span class="built_in">console</span>.log(xhr.response)</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">       <span class="built_in">console</span>.log(<span class="string">"ERROR:"</span> + xhr.status)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>后面的就是: 不同的设置条件的各种请求的尝试，以及用Jquery的尝试</p>
</li>
<li>感觉这一块还有好多要学习的，要把之前看的东西串起来</li>
<li>用kidish的话来说就是：我要给你补得还有好多…</li>
</ul>
<h4 id="2、Axios"><a href="#2、Axios" class="headerlink" title="2、Axios"></a>2、Axios</h4><p><a href="https://www.kancloud.cn/yunye/axios/234845" target="_blank" rel="noopener">Axios文档</a></p>
<ul>
<li>定义：Axios 是一个基于 promise 的 HTTP 库，可以用在浏览器和 node.js 中</li>
<li>安装：<code>$ npm install axios</code></li>
<li>引入： <code>import  axios  from  &#39;axios&#39;</code><br>  cdn： <code>https://unpkg.com/axios/dist/axios.min.js</code></li>
</ul>
<p><strong>使用</strong><br>1）get请求<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">axios.get(<span class="string">'/api/articles?type=more&amp;category=home&amp;shown_offset=1540351013034122&amp;first_view=false'</span>)</span><br><span class="line">.then(<span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(res)</span><br><span class="line">&#125;)</span><br><span class="line">.catch(<span class="function"><span class="keyword">function</span>(<span class="params">error</span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(error)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>2）post请求<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">axios.post(<span class="string">'/api/v4/articles/45395824/voters'</span>,&#123;</span><br><span class="line">	params:&#123;</span><br><span class="line">	  voting:<span class="number">1</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br><span class="line">.then(<span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(res)</span><br><span class="line">&#125;)</span><br><span class="line">.catch(<span class="function"><span class="keyword">function</span>(<span class="params">error</span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(error)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>3）执行多个并发请求<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>  <span class="title">getHomeArticle</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span>  axios.get(<span class="string">'/api/articles?type=more&amp;category=home&amp;shown_offset=1540351013034122&amp;first_view=false'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span>  <span class="title">getCareerArticle</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span>  axios.get(<span class="string">'/api/articles?type=more&amp;category=career&amp;shown_offset=1540450144315916'</span>)</span><br><span class="line">&#125;</span><br><span class="line">axios.all([getHomeArticle(),getCareerArticle()])</span><br><span class="line">.then(axios.spread(<span class="function"><span class="keyword">function</span>(<span class="params">home,career</span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(home)</span><br><span class="line">	<span class="built_in">console</span>.log(career)</span><br><span class="line">&#125;))</span><br></pre></td></tr></table></figure></p>
<p><strong><code>axios.all(iterable)</code></strong> <strong><code>axios.spread(callback)</code></strong></p>
<p>4）<strong><code>axios(url[, config])</code></strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">axios(&#123;</span><br><span class="line">  method: <span class="string">'post'</span>,</span><br><span class="line">  url: <span class="string">'/user/12345'</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    firstName: <span class="string">'Fred'</span>,</span><br><span class="line">    lastName: <span class="string">'Flintstone'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>——请求方法的别名</p>
<blockquote>
<p> axios.request(config)<br>    axios.get(url[, config])<br>    axios.delete(url[, config])<br>    axios.head(url[, config])<br>    axios.post(url[, data[, config]])<br>    axios.put(url[, data[, config]])<br>    axios.patch(url[, data[, config]])</p>
</blockquote>
<p>在使用别名方法时， <code>url</code>、<code>method</code>、<code>data</code> 这些属性都不必在配置中指定<br>若想指定其他参数，可以使用<code>实例方法</code>如：<code>axios#post(url[, data[, config]])</code></p>
<p>5）响应结构<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  data: &#123;&#125;,          <span class="comment">// `data` 由服务器提供的响应</span></span><br><span class="line">  status: <span class="number">200</span>,       <span class="comment">// `status` 来自服务器响应的 HTTP 状态码</span></span><br><span class="line">  statusText: <span class="string">'OK'</span>,  <span class="comment">// `statusText` 来自服务器响应的 HTTP 状态信息</span></span><br><span class="line">  headers: &#123;&#125;,       <span class="comment">// `headers` 服务器响应的头</span></span><br><span class="line">  config: &#123;&#125;         <span class="comment">// `config` 是为请求提供的配置信息</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>6）配置的默认值/defaults<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">axios.defaults.baseURL = <span class="string">'https://api.example.com'</span>;</span><br><span class="line">axios.defaults.headers.post[<span class="string">'Content-Type'</span>] = <span class="string">'application/x-www-form-urlencoded'</span>;</span><br></pre></td></tr></table></figure></p>
<p> 配置的优先顺序：库的默认值 &lt; 实例的 <code>defaults</code> 属性 &lt; 请求的 <code>config</code> 参数</p>
<p>7）错误处理<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">axios.get(<span class="string">'/user/12345'</span>)</span><br><span class="line">  .catch(<span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (error.response) &#123;</span><br><span class="line">      <span class="comment">// 请求已发出，但服务器响应的状态码不在 2xx 范围内</span></span><br><span class="line">      <span class="built_in">console</span>.log(error.response)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// Something happened in setting up the request that triggered an Error</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'Error'</span>, error.message);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(error.config);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure></p>
<ul>
<li><p>可以使用 <code>validateStatus</code> 配置选项定义一个自定义 HTTP 状态码的错误范围</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">axios.get(<span class="string">'/user/12345'</span>, &#123;</span><br><span class="line">  validateStatus: <span class="function"><span class="keyword">function</span> (<span class="params">status</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> status &lt; <span class="number">500</span>; <span class="comment">// 状态码在大于或等于500时才会 reject</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>kidish的封装：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.catch(<span class="function"><span class="params">e</span>  =&gt;</span> &#123;</span><br><span class="line">	e.response  ?  cb(e.response) :  cb(&#123;<span class="attr">status</span>:  <span class="number">500</span>,<span class="attr">data</span>:&#123;<span class="attr">result</span>:  <span class="string">'errInter'</span>&#125;&#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="3、jQuery中的Ajax"><a href="#3、jQuery中的Ajax" class="headerlink" title="3、jQuery中的Ajax"></a>3、jQuery中的Ajax</h4><p><code>jQuery.ajax( url [, settings ] )</code><br><a href="http://www.css88.com/jqapi-1.9/jQuery.ajax/#jQuery-ajax-settings" target="_blank" rel="noopener">中文文档</a>   <code>settings</code>参数及设置<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;<span class="attr">url</span>:  <span class="string">"api/articles?type=more&amp;category=home&amp;shown_offset=1540351013034122&amp;first_view=false"</span>,</span><br><span class="line">	contentType:  <span class="string">"application/json"</span></span><br><span class="line">&#125;).done(<span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(res);</span><br><span class="line">&#125;).fail(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">"Error: "</span> + err.status);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<ul>
<li><p><a href="http://www.css88.com/jqapi-1.9/jQuery.get/#jQuery-get-url-data-success-dataType" target="_blank" rel="noopener">jQuery.get( url [, data ] [, success ] [, dataType ] )</a></p>
</li>
<li><p><code>[, success ]</code> 为当请求成功时运行的函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span>  data = &#123;<span class="attr">voting</span>:<span class="number">1</span>&#125;</span><br><span class="line">data = <span class="built_in">JSON</span>.stringify(data)</span><br><span class="line">$.post(<span class="string">'/api/v4/articles/45395824/voters'</span>,&#123;data&#125;,</span><br><span class="line">	<span class="function"><span class="keyword">function</span>(<span class="params">data,status</span>)</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">"Data: "</span> + data + <span class="string">"\nStatus: "</span> + status);</span><br><span class="line">	&#125;,<span class="string">"json"</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<ul>
<li><a href="http://www.css88.com/jqapi-1.9/jQuery.get/#jQuery-get-url-data-success-dataType" target="_blank" rel="noopener">jQuery.get( url [, data ] [, success ] [, dataType ] )</a><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$.get(<span class="string">'api/articles?type=more&amp;category=home&amp;shown_offset=1540351013034122&amp;first_view=false'</span>,</span><br><span class="line">	<span class="function"><span class="keyword">function</span>(<span class="params">data,status</span>)</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(data)</span><br><span class="line">		<span class="built_in">console</span>.log(status) <span class="comment">//success</span></span><br><span class="line">	&#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<p>更多使用，总感觉用到了才知道。。。。。。</p>

        
        <br>
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>

    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        
        <li>
            <a target="_blank" href="https://www.zhihu.com/people/kidish-83">
                            <span class="fa-stack fa-lg">
                                 <i class="iconfont icon-zhihu"></i>
                            </span>
            </a>
        </li>
        

        
        <li>
            <a target="_blank" href="http://weibo.com/1643945963">
                            <span class="fa-stack fa-lg">
                                  <i class="iconfont icon-weibo"></i>
                            </span>
            </a>
        </li>
        

        

        
        <li>
            <a target="_blank" href="https://github.com/firstsmarts">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        

    </ul>
    
    <p>
        <span>/</span>
        
        <span><a href="https://kilimanjarol.github.io/">kilimanjarol</a></span>
        <span>/</span>
        
        <span><a href="https://stackedit.io/">stackedit</a></span>
        <span>/</span>
        
        <span><a href="https://knktc.com/">knktc</a></span>
        <span>/</span>
        
    </p>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a href="https://hexo.io/">Hexo</a>  Theme <a href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="/js/index.js"></script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


    <script>
        /**
         *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
         *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
        */
        if( '' || '')
        var disqus_config = function () {
            this.page.url = '';  // Replace PAGE_URL with your page's canonical URL variable
            this.page.identifier = ''; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
        };

        (function() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');
            s.src = 'https://firstsmarts.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();
    </script>



</html>
